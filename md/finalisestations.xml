<?xml version='1.0' encoding='utf-8'?>
<diff>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculateDocks']/actions/set_value[@exact='0.45f'][@name='$NonCapitalTradeRatio']/@exact">0.35f</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculateDocks']/actions/set_value[@exact='0.99f'][@name='$MediumTradeRatio']/@exact">0.95f</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculateDocks']/actions/set_value[@exact='3000'][@name='$TradeCapacity']/@exact">6000</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/set_value[@exact='0.55f'][@name='$CapitalTradeRatio']/@exact">0.65f</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/set_value[@exact='17500'][@name='$TradeCapacity']/@exact">30000</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/set_value[@exact='1000 - (1000 - $NumRequiredPiers)i'][@name='$NumRequiredPiers']/@exact">[1000 - (1000 - $NumRequiredPiers)i,1].max</replace>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/do_if[@value='not $ExistingTradeLocationsCount']/do_if[@value='$ViableBasePierModules.count']/set_value[@name='$BasePier']">
    <do_if value="true">
      <sort_list list="$ViableBasePierModules" sortbyvalue="loop.element.numpierdocks" sortdescending="true"/>
      <set_value name="$DAI" min="1" max="$ViableBasePierModules.count" profile="decreasing"/>
      <set_value name="$BasePier" exact="$ViableBasePierModules.{$DAI}"/>
    </do_if>
  </replace>
  <add sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/do_if[@value='not $ExistingTradeLocationsCount']/do_if[@value='$ViableBasePierModules.count']">
    <remove_value name="$DAI"/>
  </add>
  <add sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/do_if[@value='$RemainingPiers']/do_if[@value='$ViableAdditionalPierModules.count']/do_while[@value='$RemainingPiers']" pos="before">
    <sort_list list="$ViableAdditionalPierModules" sortbyvalue="loop.element.numpierdocks" sortdescending="true"/>
  </add>
  <replace sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/do_if[@value='$RemainingPiers']/do_if[@value='$ViableAdditionalPierModules.count']/do_while[@value='$RemainingPiers']/set_value[@name='$AdditionalPier']">
    <do_if value="true">
      <set_value name="$DAI" min="1" max="$ViableAdditionalPierModules.count" profile="decreasing"/>
      <set_value name="$AdditionalPier" exact="$ViableAdditionalPierModules.{$DAI}"/>
    </do_if>
  </replace>
  <add sel="/mdscript/cues/library[@name='DefaultCalculatePiers']/actions/do_if[@value='$RemainingPiers']/do_if[@value='$ViableAdditionalPierModules.count']/do_while[@value='$RemainingPiers']/do_if[@value='$NumConnections gt 0']" pos="before">
    <remove_value name="$DAI"/>
  </add>
</diff>
